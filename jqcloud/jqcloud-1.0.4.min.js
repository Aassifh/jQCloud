/*!
 * jQCloud Plugin for jQuery
 *
 * Version 1.0.4
 *
 * Copyright 2011, Luca Ongaro
 * Licensed under the MIT license.
 *
 * Date: Tue Jan 28 11:52:37 +0100 2014
*/
!function(t){"use strict";t.fn.jQCloud=function(e,i){var n=this,h=n.attr("id")||Math.floor(1e6*Math.random()).toString(36),o={width:n.width(),height:n.height(),center:{x:(i&&i.width?i.width:n.width())/2,y:(i&&i.height?i.height:n.height())/2},delayedMode:e.length>50,shape:!1,encodeURI:!0,removeOverflowing:!0};i=t.extend(o,i||{}),this.hasClass("jqcloud")&&(this.empty(""),this.removeClass("jqcloud")),n.addClass("jqcloud").width(i.width).height(i.height),"static"===n.css("position")&&n.css("position","relative");var r=function(){for(var o=function(t,e){var i=function(t,e){return Math.abs(2*t.offsetLeft+t.offsetWidth-2*e.offsetLeft-e.offsetWidth)<t.offsetWidth+e.offsetWidth&&Math.abs(2*t.offsetTop+t.offsetHeight-2*e.offsetTop-e.offsetHeight)<t.offsetHeight+e.offsetHeight?!0:!1},n=0;for(n=0;n<e.length;n++)if(i(t,e[n]))return!0;return!1},r=0;r<e.length;r++)e[r].weight=parseFloat(e[r].weight,10);e.sort(function(t,e){return t.weight<e.weight?1:t.weight>e.weight?-1:0});var a="rectangular"===i.shape?18:2,s=[],d=i.width/i.height,l=function(r,l){var f,c=h+"_word_"+r,g=6.28*Math.random(),u=0,w=0,p=0,m=5,v="",M="";if(l.html=t.extend(l.html,{id:c}),l.html&&l.html["class"]&&(v=l.html["class"],delete l.html["class"]),e[0].weight>e[e.length-1].weight&&(m=Math.round((l.weight-e[e.length-1].weight)/(e[0].weight-e[e.length-1].weight)*9)+1),f=t("<span>").attr(l.html).addClass("w"+m+" "+v),l.link?("string"==typeof l.link&&(l.link={href:l.link}),i.encodeURI&&(l.link=t.extend(l.link,{href:encodeURI(l.link.href).replace(/'/g,"%27")})),M=t("<a>").attr(l.link).text(l.text)):M=l.text,f.append(M),l.handlers)for(var x in l.handlers)l.handlers.hasOwnProperty(x)&&"function"==typeof l.handlers[x]&&t(f).bind(x,l.handlers[x]);n.append(f);var k=f.width(),y=f.height(),C=i.center.x-k/2,R=i.center.y-y/2,b=f[0].style;for(b.position="absolute",b.left=C+"px",b.top=R+"px";o(f[0],s);){if("rectangular"===i.shape)switch(w++,w*a>(1+Math.floor(p/2))*a*(p%4%2===0?1:d)&&(w=0,p++),p%4){case 1:C+=a*d+2*Math.random();break;case 2:R-=a+2*Math.random();break;case 3:C-=a*d+2*Math.random();break;case 0:R+=a+2*Math.random()}else u+=a,g+=(r%2===0?1:-1)*a,C=i.center.x-k/2+u*Math.cos(g)*d,R=i.center.y+u*Math.sin(g)-y/2;b.left=C+"px",b.top=R+"px"}return i.removeOverflowing&&(0>C||0>R||C+k>i.width||R+y>i.height)?(f.remove(),void 0):(s.push(f[0]),t.isFunction(l.afterWordRender)&&l.afterWordRender.call(f),void 0)},f=function(h){return h=h||0,n.is(":visible")?(h<e.length?(l(h,e[h]),setTimeout(function(){f(h+1)},10)):t.isFunction(i.afterCloudRender)&&i.afterCloudRender.call(n),void 0):(setTimeout(function(){f(h)},10),void 0)};i.delayedMode?f():(t.each(e,l),t.isFunction(i.afterCloudRender)&&i.afterCloudRender.call(n))};return setTimeout(function(){r()},10),n}}(jQuery);